component:
  name: my-nodejs-app
  runtime: nodejs18
  source:
    type: git
    repository: https://github.com/jaydev25/resume-server
    branch: main
  build:
    commands:
      - npm install
  run:
    command: node server.js
    env:
      - name: PORT
        value: "3000"
      - name: NODE_ENV
        value: "production"
  ports:
    - name: websocket
      port: 3000
      protocol: WS
  scaling:
    minReplicas: 1
    maxReplicas: 3
  ingress:
    rules:
      - host: resume-server.choreo.dev
        paths:
          - path: /
            backend:
              serviceName: resume-server
              servicePort: 3000
            pathType: Prefix
            protocol: WS
  observability:
    logs: enabled
    metrics: enabled
    tracing: enabled
